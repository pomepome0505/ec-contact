# 非機能要件定義書

本ドキュメントは初期目標値を定義したものです。

---

## 非機能要件の重要度と対応方針

| 品質属性 | 重要度 | 対応 | 理由 |
|---------|-------|------|------|
| 可用性 | 高 | 詳細定義 | システムダウン時の顧客影響。代替手段（電話）はあるがコスト対効果を考慮 |
| 性能 | 高 | 詳細定義 | API応答遅延・画面レスポンス遅延が顧客満足度・業務効率に直結 |
| 修正可能性 | 高 | 詳細定義 | 月1-2回の機能追加、週1回のバグ修正への迅速対応 |
| コスト効率 | 高 | 詳細定義 | システム化による人件費削減と顧客満足度向上のバランス |
| セキュリティ | 中 | 簡潔定義 | 個人情報を扱うため必須だが、一般的な対策で対応可能 |
| 相互接続性 | 中 | 簡潔定義 | ECサイトからAPI経由で問い合わせデータを受け取る |
| 拡張性 | 中 | 簡潔定義 | 現時点のトラフィックは小規模だが、将来的なサービス拡大・機能追加に備えた設計 |
| 完全性 | 低 | 一部対応 | データ整合性は実装時に考慮 |
| 信頼性 | - | 可用性に含む | システム稼働率99.5%で対応 |
| 効率性 | - | 性能に含む | レスポンスタイム要件を満たせば自然と達成される |
| 導入可能性 | - | 対応不要 | Webアプリのためユーザーのインストール作業不要 |
| 堅牢性 | - | 対応不要 | 予期しない入力値への対応は実装時のバリデーション設計で対応 |
| 安全性 | - | セキュリティに含む | 犯罪・不正行為・個人情報漏えいからの保護はセキュリティ要件で対応 |
| ユーザビリティ | - | 対応不要 | UI/UXは機能要件・画面設計で対応 |
| 移植性 | - | 対応不要 | 特定クラウド環境専用として構築 |
| 再利用性 | - | 対応不要 | 単一システムのためコンポーネント再利用は実装時に考慮 |
| 検証可能性 | - | 対応不要 | テストのしやすさはテスト計画・実装時に考慮 |

---

## 1. 可用性

### 1-1. システム稼働率

**前提（ビジネス課題）**

問い合わせシステムダウンの影響：
- 直接的な売上損失：ゼロ（ECサイト本体は別システムとして稼働するため）
- 代替手段：あり（電話問い合わせ）
- 影響：顧客の不便、サポートコスト増（限定的）

**目標値**

| 項目 | 目標値 |
|------|-------|
| システム稼働率 | 99.5%以上 |
| 月間許容ダウンタイム | 3.6時間以内 |

**補足（技術選定の考え方）**

- データベースの冗長化により可用性は担保できるが、インフラコストが増加する
- 本システムでは、システムがダウンした際の代替手段があるため、費用対効果から99.5%を目標とする

---

### 1-2. その他の可用性要件

| 項目 | 目標値 | 補足 |
|------|-------|------|
| 障害検知時間 | 3分以内 | 早期検知で迅速な対応 |
| 自動復旧時間 | 10分以内 | システムの自動復旧 |
| 手動復旧時間 | 2時間以内 | 障害調査・原因特定・復旧作業を含む |

---

## 2. 性能

### 2-1. レスポンスタイム要件

**前提（ビジネス課題）**

問い合わせ受付API（ECサイト→問い合わせシステム）のレスポンス遅延の影響：
- タイムアウト・エラー → 電話問い合わせに切り替え、サポート逼迫
- 顧客満足度低下 → 待たされるストレス、ブランドイメージ低下
- 離脱 → 問い合わせを諦める、顧客の声を拾えない

従業員向け管理画面のレスポンス遅延の影響：
- 1日100回操作 × 10秒 = 16分/日の待ち時間（業務効率低下）
- 1日100回操作 × 3秒 = 5分/日の待ち時間（許容範囲）

**目標値**

| 対象 | 目標値 | 理由 |
|------|-------|------|
| API応答時間（問い合わせ受付API） | 95%ile: 1秒以内 | 顧客体験の維持 |
| 管理画面レスポンスタイム | 95%ile: 3秒以内 | 業務効率の維持 |  

---

**補足：API応答時間1秒以内の根拠**

複数の情報源で、APIの応答時間は1秒以内が推奨されている：

- 「高性能なAPIは平均応答時間が0.1秒から1秒」（参考: https://blog.hubspot.com/website/api-response-time ）
- 「一般的に、応答時間は0.1-1秒の間隔でできるだけ速くすべき」（参考: https://www.guru99.com/response-time-testing.html ）
- 「典型的なWeb/モバイルAPIの場合、1秒以内を目指すべき」（参考: https://www.ioriver.io/terms/api-performance ）

問い合わせAPIの処理内容（バリデーション、DB書き込み、レスポンス返却）から、1秒以内での応答は十分実現可能と判断。

※95パーセンタイル値での測定を採用（参考: https://dzone.com/articles/response-time-metric-service ）

---

## 3. 修正可能性

### 3-1. コード修正のしやすさ

**前提（ビジネス課題）**

コード修正の頻度：
- 新機能追加：月1-2回（顧客要望、業務改善）
- バグ修正：週1回程度

修正困難な場合の影響：
- スパゲッティコード → 修正に時間がかかる
- テストがない → 修正時に新たなバグ混入
- 属人化 → 特定の人しか修正できない

**目標値**

| 項目 | 目標値 |
|------|-------|
| 機能追加時間 | 1週間以内 |
| バグ修正時間 | 半日以内 |
| コードの可読性 | 新規メンバーが1週間でコードを理解できる |
| テストカバレッジ | 主要機能80%以上 |

---

## 4. コスト効率

### 4-1. システム化の効果

**削減効果の要点**

- 現状（Excel管理）：1件あたり12分30秒、月125時間、人件費25万円/月
- システム化後：1件あたり6分、月60時間、人件費12万円/月
- 削減効果：月13万円（年間156万円）

---

**Excel管理の課題とシステム化による効果**

現状（Excel管理）の課題：
- 問い合わせ内容をメールからExcelに手作業で転記
- 複数のExcelファイル（年度ごと等）で管理しており検索に時間
- 複数担当者での同時編集が困難（ファイル競合）
- 対応履歴が追いにくい（セル内に文字列で追記）

対応時間の比較（平均）：
- 現状：12分30秒/件
  - メールからExcel転記：5分
  - 過去対応の検索（複数ファイル）：1分30秒
  - 内容確認・対応内容検討：5分
  - ステータス・履歴更新：1分
- システム化後：6分/件
  - メール転記：不要（API経由で自動登録）
  - 過去対応の検索：30秒
  - 内容確認・対応内容検討：5分
  - ステータス・履歴更新：30秒
- 削減：6分30秒/件

主な削減要因：
- メールからExcelへの転記作業の削減：5分
- 検索時間の短縮（複数ファイル検索 → システム検索）：1分
- ステータス・履歴更新の効率化：30秒

月間工数：
- 現状：600件 × 12.5分 = 125時間/月 → 人件費25万円/月（時給2,000円）
- システム化後：600件 × 6分 = 60時間/月 → 人件費12万円/月（時給2,000円）
- **削減：13万円/月（年間156万円）**

---

**顧客満足度の向上**

システム化により以下の改善が実現され、顧客満足度が向上する（投資回収計算には含めない）：

対応スピードの向上：
- 検索・確認時間の大幅短縮 → より多くの問い合わせに迅速対応
- 顧客の待ち時間短縮

対応品質の向上：
- 過去対応の参照が容易 → 一貫性のある対応
- 対応漏れの削減 → 顧客の信頼獲得

ブランドイメージ向上：
- 「問い合わせてもすぐ対応してくれる」「しっかり管理されている」
- 顧客ロイヤリティ向上、リピート購入増

これらの効果は直接的な金額換算は困難だが、中長期的なビジネス価値として極めて重要。

---

**コスト全体像**

初期投資（開発コスト）：約180万円
- エンジニア人件費（3ヶ月）：180万円
- ※年収600万円の社内エンジニアを想定

運用コスト：月2.5万円（年間30万円）
- インフラコスト：月2-3万円

削減効果：年間156万円
- 対応時間削減：156万円/年

投資回収：
- 年間削減効果（純額）：156万円 - 30万円 = 126万円
- 回収期間：180万円 ÷ 126万円 = **約1.4年**

**→ 約1.5年で投資回収**

加えて、顧客満足度向上という数値化困難だが重要な効果が得られる。

---

**目標値**

| 項目 | 目標値 |
|------|-------|
| 平時のインフラコスト | 月額2-3万円以内 |
| ピーク時の追加コスト | 年間1-2万円程度 |

---

## 5. セキュリティ

### 5-1. セキュリティ要件

**前提（ビジネス課題）**

保護すべき情報：
- 顧客の個人情報：氏名、メールアドレス、電話番号
- 問い合わせ内容：配送先住所、注文情報

漏洩時の影響：
- 個人情報保護法違反 → 法的リスク
- 顧客信頼の喪失 → ブランドイメージ低下、売上減少
- 損害賠償請求 → 経済的損失

**目標値**

| 項目 | 目標値 |
|------|-------|
| 通信の暗号化 | HTTPS通信の強制、TLS 1.2以上 |
| データベースアクセス制限 | プライベートネットワークのみアクセス許可 |
| データ暗号化 | データベース保存時の暗号化 |
| 認証・認可 | セッションベース認証、セッションタイムアウト30分 |

---

## 6. 相互接続性

### 6-1. 外部システムとの連携

**目標値**

| 項目 | 目標値 |
|------|-------|
| API連携 | ECサイトからREST API経由で問い合わせデータを受け取る |

---

## 7. 拡張性

### 7-1. 将来的な拡張への備え

**前提**

現時点のトラフィック：
- 通常時：0.08 req/s
- ピーク時：0.8 req/s（通常の10倍）
- 現状は小規模

将来的な可能性：
- 会員数の増加によるトラフィック増
- 新機能追加による処理負荷増

**設計方針**

| 項目 | 方針 |
|------|------|
| リソース追加の容易性 | 必要時にサーバーリソースを容易に追加できる構成 |
| 機能拡張性 | 新機能追加・変更が容易な設計 |

---  

以上